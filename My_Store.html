<!DOCTYPE html>
<html lang="en" class="antialiased">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Inventory</title>
	<meta name="description" content="">
	<meta name="keywords" content="">
  <link rel="apple-touch-icon" sizes="152x152" href="./Images/ProjectImgs/Favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./Images/ProjectImgs/Favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./Images/ProjectImgs/Favicon/favicon-16x16.png">
  <link rel="manifest" href="./Images/ProjectImgs/Favicon/site.webmanifest">
  <link rel="mask-icon" href="./Images/ProjectImgs/Favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">

	<link href="./css/tailwind/tailwind@2.2.19.min.css" rel=" stylesheet">
	<!--Replace with your tailwind.css once created-->


	<!--Regular Datatables CSS-->
	<link href="./css/jquery.dataTables/jquery.dataTables.min.css" rel="stylesheet">
	<!--Responsive Extension Datatables CSS-->
	<link href="./css/jquery.dataTables/responsive.dataTables.min.css" rel="stylesheet">
	<link href="./css/index.css" rel="stylesheet" >



</head>

<body class="flex flex-col min-h-screen  min-h-screen bg-gray-900 text-gray-900 tracking-wider leading-normal">
<div class="flex-1">
  

  <!-- Navigation Menu -->
  <nav class="flex flex-col md:flex-row justify-between items-center bg-gray-800 text-white p-4 rounded-md mb-8">
    <!-- Home Icon -->
	<a href="./index.html">
    <div class="flex items-center space-x-2 mb-4 md:mb-0">
      <!-- SVG Icon for Home -->
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 fill-current text-white" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M10 3.293l6.146 6.147a.5.5 0 0 1-.708.708L10 4.707l-5.439 5.439a.5.5 0 0 1-.708-.708L10 3.293zM2 7.5a.5.5 0 0 1 .5-.5h1.854l5.5 5.5H14.5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-5z"/>
      </svg>
      <!-- Text for Home -->
      <span>Home</span>
    </div>
	</a>
    <!-- Pagination for Current Path -->
    <div class="pagination text-lg font-semibold mb-4 md:mb-0">Inventory</div>
    <!-- Buttons for Inventory and Create Ledger -->
    <div class="flex items-center space-x-4">
        <a href="./Ledger.html"
            class="bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded-md transition duration-300">Create Ledger</a>
	  <a href="./Order.html" class="bg-indigo-500 hover:bg-indigo-600 text-white px-2 py-1 rounded-md transition duration-300">Create Order</a>
    </div>
  </nav>

<!-- Product lsitings here start  -->

<div class="max-w-4xl mx-auto py-6 px-6 lg:px-0">

  <!-- Search bar and Add Product button -->
  <div class=" mb-4 flex justify-between">
		
		

	<div class="w-2/3   rounded-lg shadow">
		<div class="relative">
			<input type="text" id="searchInput" class="w-full bg-white h-10 px-5 pr-10 rounded-full text-sm focus:outline-none"
			placeholder="Search...">
			<button type="submit" class="absolute right-0 top-0 mt-3 mr-4">
				<svg class="text-gray-600 h-4 w-4 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
					<path
					d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
				</svg>
			</button>
		</div>
	</div>
		<!-- Add Product buttton here  -->
	<a class="flex items-center justify-center px-3 py-1 bg-blue-500 text-white hover:bg-gray-700 rounded-md transition duration-300" href="./Product.html">
		Add Product 
	</a>
</div>

  <!-- Product table -->
  <div class="overflow-x-auto bg-white rounded-lg">
    <table id="My_StoreProductTabel" class="table-auto min-w-full bg-white rounded-lg overflow-hidden">
      <thead class="text-left">
        <tr class="bg-red-700 text-gray-100">
          <th class="px-4 py-2">Image</th>
          <th class="px-4 py-2">Product Name</th>
          <th class="px-4 py-2">Stock</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
  
  </div>




<!-- Product lsitings here Ends  -->
</div>


<!-- Footer Section Start here  -->
<footer class="mt-2 md:mt-6 bg-gray-800 p-4 pt-5 pb-2 sticky bottom-0">
  <div class="container mx-auto md:px-16">
    <div class="flex flex-wrap sm:flex-row justify-between items-center">
      <div class="footer-left text-gray-300 text-center sm:text-left w-full md:w-1/3"> <span
          class="text-gray-500 md:text-gray-300">Developed by: |</span>
        <span class="text-sm md:text-base hover:text-gray-100 hover:text-sm hover:font-semibold text-right">Hassan Tariq
          &
          Team</span>
      </div>
      <div class="footer-right text-gray-300 text-center sm:text-right w-full md:w-1/3"> <span
          class="text-gray-500 md:text-gray-300">Email Us: | </span>
        <a class="hover:text-gray-100 hover:text-sm hover:font-semibold" href="mailto:raohassan57@gmail.com"
          target="_blank">
          <span class="text-right">raohassan57@gmail.com</span>
        </a>
      </div>
    </div>
    <div class="text-center text-gray-400 text-xs mt-1 md:mt-0">All Rights Reserved</div>
  </div>
</footer>
  
  <!-- Footer Section End here  -->



</body>
<script>
  // Getting All the Product List start here 
  let server = 'https://platformshdeploy-zitavcq-6cxmlqongi3dc.au-2.platformsh.site/'
var AllProduct = "";
// Make a fetch request to the backend endpoint on page load
window.onload = async () => {
  try {
    const response = await fetch(`${server}api/Product/`);
    
    // Check if the response is successful
    if (!response.ok) {
      throw new Error('Failed to fetch products');
    }
    
    // Parse the JSON response
    const products = await response.json();
    
    AllProduct = products;

    renderProducts(AllProduct)


// Add search functionality after products are fetched
    addSearchFunctionality();
    // Log the products to the console
  } catch (error) {
    console.error('Error fetching products:', error);
  }
};



  // Getting All the Product List End here 
// Rendering the Table Body funcitonality start here 




function renderProducts(products) {
 // Get the table tBody
 const tBody = document.querySelector('#My_StoreProductTabel tbody')

  // Clear existing content in the tbody
  tBody.innerHTML = '';

  // Map each product to an HTML string representing a table row
  const productRows = products.map(product => {
    // Create table data for product image
    const imgSrc = `${server}web/uploads/Images/ProductImg/` + product.imageUrl || 'https://via.placeholder.com/50'; // Use placeholder image if 

    // Defineing _id 
    const ProductId = product._id ? product._id : "";

    return `
          <tr onclick=redirectToProductPage("${ProductId}") style="cursor:pointer;">
            <td class="px-4 py-2">
                <img src="${imgSrc}" alt="Product Image" class="w-12 h-12 object-cover rounded">
            </td>
            <td class="px-4 py-2 min-h-[3rem]">
                ${product.productName}
            </td>
            <td class="px-4 py-2">
                ${product.stock}
            </td>
          </tr>`;
  });

  // Join the productRows array into a single HTML string and append it to the tbody
  tBody.innerHTML = productRows.join('');
}

function redirectToProductPage(id) {
  window.location.href = `/Product.html?ProductId=${id}`
}


// Rendering the Table Body funcitonality End here 




function addSearchFunctionality() {
  // Get the input element
  const searchInput = document.getElementById('searchInput');

  if (AllProduct.length) {
    // Get the table rows
    const rows = document.querySelectorAll('#My_StoreProductTabel tbody tr');
    
    // Add event listener for input changes
    searchInput.addEventListener('input', function() {
      const searchTerm = searchInput.value.toLowerCase();
      rows.forEach(row => {
        const productName = row.querySelector('td:nth-child(2)').textContent.toLowerCase();
        if (productName.includes(searchTerm)) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    });
  }
}


  </script>




</html>